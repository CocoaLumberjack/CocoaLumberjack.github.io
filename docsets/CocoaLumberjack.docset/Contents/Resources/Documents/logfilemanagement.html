<!DOCTYPE html>
<html lang="en">
  <head>
    <title>LogFileManagement  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="LogFileManagement  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">CocoaLumberjack 3.7.0 Docs</a> (64% documented)</p>
        <p class="header-right"><a href="https://github.com/CocoaLumberjack/CocoaLumberjack"><img src="img/gh.png"/>View on GitHub</a></p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">CocoaLumberjack Reference</a>
        <img id="carat" src="img/carat.png" />
        LogFileManagement  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="arc.html">ARC</a>
              </li>
              <li class="nav-group-task">
                <a href="appcode-support.html">AppCode-support</a>
              </li>
              <li class="nav-group-task">
                <a href="architecture.html">Architecture</a>
              </li>
              <li class="nav-group-task">
                <a href="combineloggers.html">CombineLoggers</a>
              </li>
              <li class="nav-group-task">
                <a href="customcontext.html">CustomContext</a>
              </li>
              <li class="nav-group-task">
                <a href="customformatters.html">CustomFormatters</a>
              </li>
              <li class="nav-group-task">
                <a href="customloglevels.html">CustomLogLevels</a>
              </li>
              <li class="nav-group-task">
                <a href="customloggers.html">CustomLoggers</a>
              </li>
              <li class="nav-group-task">
                <a href="dynamicloglevels.html">DynamicLogLevels</a>
              </li>
              <li class="nav-group-task">
                <a href="faq.html">FAQ</a>
              </li>
              <li class="nav-group-task">
                <a href="finegrainedlogging.html">FineGrainedLogging</a>
              </li>
              <li class="nav-group-task">
                <a href="gettingstarted.html">GettingStarted</a>
              </li>
              <li class="nav-group-task">
                <a href="logfilemanagement.html">LogFileManagement</a>
              </li>
              <li class="nav-group-task">
                <a href="perloggerloglevels.html">PerLoggerLogLevels</a>
              </li>
              <li class="nav-group-task">
                <a href="peruserloglevels.html">PerUserLogLevels</a>
              </li>
              <li class="nav-group-task">
                <a href="performance.html">Performance</a>
              </li>
              <li class="nav-group-task">
                <a href="problemsolution.html">ProblemSolution</a>
              </li>
              <li class="nav-group-task">
                <a href="readme.html">README</a>
              </li>
              <li class="nav-group-task">
                <a href="xcodecolors.html">XcodeColors</a>
              </li>
              <li class="nav-group-task">
                <a href="xcodetricks.html">XcodeTricks</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/CLIColor.html">CLIColor</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDASLLogCapture.html">DDASLLogCapture</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDASLLogger.html">DDASLLogger</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDAbstractDatabaseLogger.html">DDAbstractDatabaseLogger</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDAbstractLogger.html">DDAbstractLogger</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/c:objc(cs)DDAtomicCounter">DDAtomicCounter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDContextBlacklistFilterLogFormatter.html">DDContextBlacklistFilterLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDContextWhitelistFilterLogFormatter.html">DDContextWhitelistFilterLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDDispatchQueueLogFormatter.html">DDDispatchQueueLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDFileLogger.html">DDFileLogger</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDLog.html">DDLog</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDLogFileFormatterDefault.html">DDLogFileFormatterDefault</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDLogFileInfo.html">DDLogFileInfo</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDLogFileManagerDefault.html">DDLogFileManagerDefault</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDLogMessage.html">DDLogMessage</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDLoggerInformation.html">DDLoggerInformation</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDMultiFormatter.html">DDMultiFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDOSLogger.html">DDOSLogger</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DDTTYLogger.html">DDTTYLogger</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Constants.html">Constants</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Constants.html#/c:@CocoaLumberjackVersionNumber">CocoaLumberjackVersionNumber</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@CocoaLumberjackVersionString">CocoaLumberjackVersionString</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@DDLoggerNameASL">DDLoggerNameASL</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@DDLoggerNameFile">DDLoggerNameFile</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@DDLoggerNameOS">DDLoggerNameOS</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@DDLoggerNameTTY">DDLoggerNameTTY</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@DDQualityOfServiceBackground">DDQualityOfServiceBackground</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@DDQualityOfServiceDefault">DDQualityOfServiceDefault</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@DDQualityOfServiceUnspecified">DDQualityOfServiceUnspecified</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@DDQualityOfServiceUserInitiated">DDQualityOfServiceUserInitiated</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@DDQualityOfServiceUserInteractive">DDQualityOfServiceUserInteractive</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@DDQualityOfServiceUtility">DDQualityOfServiceUtility</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@kDDASLDDLogValue">kDDASLDDLogValue</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@kDDASLKeyDDLog">kDDASLKeyDDLog</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@kDDDefaultLogFilesDiskQuota">kDDDefaultLogFilesDiskQuota</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@kDDDefaultLogMaxFileSize">kDDDefaultLogMaxFileSize</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@kDDDefaultLogMaxNumLogFiles">kDDDefaultLogMaxNumLogFiles</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@kDDDefaultLogRollingFrequency">kDDDefaultLogRollingFrequency</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/DDDispatchQueueLogFormatterMode.html">DDDispatchQueueLogFormatterMode</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/DDLogFlag.html">DDLogFlag</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/DDLogLevel.html">DDLogLevel</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/DDLogMessageOptions.html">DDLogMessageOptions</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/DDAtomicCountable.html">DDAtomicCountable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DDLogFileManager.html">DDLogFileManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DDLogFormatter.html">DDLogFormatter</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DDLogger.html">DDLogger</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DDRegisteredDynamicLogging.html">DDRegisteredDynamicLogging</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Type%20Definitions.html">Type Definitions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Type%20Definitions.html#/c:DDTTYLogger.h@T@DDColor">DDColor</a>
              </li>
              <li class="nav-group-task">
                <a href="Type%20Definitions.html#/c:DDLoggerNames.h@T@DDLoggerName">DDLoggerName</a>
              </li>
              <li class="nav-group-task">
                <a href="Type%20Definitions.html#/c:DDDispatchQueueLogFormatter.h@T@DDQualityOfServiceName">DDQualityOfServiceName</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/c:@F@DDExtractFileNameWithoutExtension">DDExtractFileNameWithoutExtension</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/c:DDTTYLogger.h@F@DDMakeColor">DDMakeColor</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p>Compress your log files, or upload them to a server.</p>
<h3 id='introduction' class='heading'>Introduction</h3>

<p>When you think about it, there are two components of file logging. One component is the part that actually writes the log messages to the file, and decides when the file needs to be rolled. And the other component is the part that actually manages the log files. This is the part that actually does something with the log files once they&rsquo;re completed. Maybe it compresses them to save disk space. Maybe it uploads them to a server. Maybe both!</p>

<p>The <code><a href="Classes/DDFileLogger.html">DDFileLogger</a></code> implementation, as you may now have guessed, is split into two components. <code><a href="Classes/DDFileLogger.html">DDFileLogger</a></code> is the component that writes the log messages to the file. And <code><a href="Protocols/DDLogFileManager.html">DDLogFileManager</a></code> is a protocol for managing log files, and deciding what to do with them after they&rsquo;ve been rolled.</p>

<p>There are two ways to initialize a <code><a href="Classes/DDFileLogger.html">DDFileLogger</a></code> instance:</p>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">DDFileLogger</span> <span class="p">:</span> <span class="nc">NSObject</span> <span class="o">&lt;</span><span class="n">DDLogger</span><span class="o">&gt;</span>
<span class="p">...</span>

<span class="o">-</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="n">init</span><span class="p">;</span>
<span class="k">-</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="nf">initWithLogFileManager</span><span class="p">:(</span><span class="n">id</span> <span class="o">&lt;</span><span class="n">DDLogFileManager</span><span class="o">&gt;</span><span class="p">)</span><span class="nv">logFileManager</span> <span class="n">NS_DESIGNATED_INITIALIZER</span><span class="p">;</span>

<span class="p">...</span>
<span class="k">@end</span>
</code></pre>

<p>The default init method simply uses an instance of <code><a href="Classes/DDLogFileManagerDefault.html">DDLogFileManagerDefault</a></code>, which is a class that simply deletes old log files. (It keeps a configurable number around, but any past that amount are simply deleted.)</p>

<p>The alternative init method allows you to pass an instance of your own custom log file manager.</p>
<h3 id='log-file-manager' class='heading'>Log File Manager</h3>

<p>Let&rsquo;s take a look at the DDLogFileManager protocol:</p>
<pre class="highlight objective_c"><code><span class="k">@protocol</span> <span class="nc">DDLogFileManager</span> <span class="o">&lt;</span><span class="n">NSObject</span><span class="o">&gt;</span>
<span class="err">@required</span>

<span class="c1">// Public properties
</span>
<span class="k">@property</span> <span class="p">(</span><span class="n">readwrite</span><span class="p">,</span> <span class="n">assign</span><span class="p">)</span> <span class="n">NSUInteger</span> <span class="n">maximumNumberOfLogFiles</span><span class="p">;</span>

<span class="c1">// Public methods
</span>
<span class="k">-</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">logsDirectory</span><span class="p">;</span>

<span class="k">-</span> <span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="n">unsortedLogFilePaths</span><span class="p">;</span>
<span class="k">-</span> <span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="n">unsortedLogFileNames</span><span class="p">;</span>
<span class="k">-</span> <span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="n">unsortedLogFileInfos</span><span class="p">;</span>

<span class="k">-</span> <span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="n">sortedLogFilePaths</span><span class="p">;</span>
<span class="k">-</span> <span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="n">sortedLogFileNames</span><span class="p">;</span>
<span class="k">-</span> <span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="n">sortedLogFileInfos</span><span class="p">;</span>

<span class="c1">// Private methods (only to be used by DDFileLogger)
</span>
<span class="k">-</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">createNewLogFileWithError</span><span class="p">(</span><span class="n">NSError</span><span class="o">**</span><span class="p">)</span><span class="n">error</span><span class="p">;</span>

<span class="k">@optional</span>

<span class="c1">// Notifications from DDFileLogger
</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">didArchiveLogFile</span><span class="o">:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">logFilePath</span> <span class="n">wasRolled</span><span class="o">:</span><span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="n">wasRolled</span><span class="p">;</span>

<span class="k">@end</span>
</code></pre>

<p>There are methods to get the logs directory, and various methods to get the list of log files. Then there is a method to create a new log file (that returns the new log file path). And lastly, there is a hook from <code><a href="Classes/DDFileLogger.html">DDFileLogger</a></code> to be notified of when a log file is rolled. This hook is designed to allow you do something with those archived log files!</p>

<p>The framework comes with a sample Xcode project that demonstrates compressing archived log files to save disk space. (It performs the compression using gzip.) The Xcode project name is <code>LogFileCompressor</code>. The <code>CompressingLogFileManager</code> class is ready to be used in your project, or you can use it as a template, or simply learn from it so you can do your own custom log file management.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2020 <a class="link" href="https://github.com/CocoaLumberjack/CocoaLumberjack" target="_blank" rel="external">CocoaLumberjack</a>. All rights reserved. (Last updated: 2020-11-21)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.6</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
